



<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="念" href="http://example.com/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="念" href="http://example.com/atom.xml" />
<link rel="alternate" type="application/json" title="念" href="http://example.com/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  

<link rel="canonical" href="http://example.com/7e446ae38e3a/">



  <title>
Theme Shoka |
Alt Name = 念 = subtitle</title>
<meta name="generator" content="Hexo 6.1.0"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">Theme Shoka
  </h1>
  
<div class="meta">
  <span class="item" title="创建时间：2022-04-28 05:27:11">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">发表于</span>
    <time itemprop="dateCreated datePublished" datetime="2022-04-28T05:27:11+08:00">2022-04-28</time>
  </span>
  <span class="item" title="本文字数">
    <span class="icon">
      <i class="ic i-pen"></i>
    </span>
    <span class="text">本文字数</span>
    <span>6.2k</span>
    <span class="text">字</span>
  </span>
  <span class="item" title="阅读时长">
    <span class="icon">
      <i class="ic i-clock"></i>
    </span>
    <span class="text">阅读时长</span>
    <span>6 分钟</span>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="切换导航栏">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">Alt Name</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipeu7txpzj20zk0m81kx.jpg"></li>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gicitf0kl1j20zk0m87fe.jpg"></li>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipetfk5zwj20zk0m8e81.jpg"></li>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gicitcxhpij20zk0m8hdt.jpg"></li>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giclxfdlttj20zk0m8npd.jpg"></li>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipeyvx1d4j20zk0m8hdt.jpg"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">首页</a></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN">
  <link itemprop="mainEntityOfPage" href="http://example.com/7e446ae38e3a/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/avatar.jpg">
    <meta itemprop="name" content="JolyneAnasui">
    <meta itemprop="description" content="subtitle, description">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="念">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <h2 id="安装shoka"><a class="anchor" href="#安装shoka">#</a> 安装 shoka</h2>
<figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> clone https://github.com/amehime/hexo-theme-shoka.git ./themes/shoka</pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>hexo uninstall hexo-renderer-marked --save</pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">npm</span> <span class="token function">install</span> hexo-renderer-multi-markdown-it --save</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment"># 可添加 --ignore-scripts 跳过 chromium 内核下载，影响 puppeteer 渲染 mermaid 图</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token function">npm</span> <span class="token function">install</span> hexo-autoprefixer --save</pre></td></tr></table></figure><h2 id="初次启动配置"><a class="anchor" href="#初次启动配置">#</a> 初次启动配置</h2>
<figure class="highlight yaml"><figcaption data-lang="YAML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># ./_config.yml</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token key atrule">theme</span><span class="token punctuation">:</span> shoka</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token key atrule">highlight</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token key atrule">prismjs</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment"># add </span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token key atrule">markdown</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token key atrule">render</span><span class="token punctuation">:</span> <span class="token comment"># 渲染器设置</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token key atrule">html</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 过滤 HTML 标签</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token key atrule">xhtmlOut</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 使用 '/' 来闭合单标签 （比如 &lt;br />）。</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token key atrule">breaks</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 转换段落里的 '\n' 到 &lt;br>。</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token key atrule">linkify</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 将类似 URL 的文本自动转换为链接。</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token key atrule">typographer</span><span class="token punctuation">:</span> </pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token key atrule">quotes</span><span class="token punctuation">:</span> <span class="token string">'“”‘’'</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token key atrule">plugins</span><span class="token punctuation">:</span> <span class="token comment"># markdown-it 插件设置</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">-</span> <span class="token key atrule">plugin</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token key atrule">name</span><span class="token punctuation">:</span> markdown<span class="token punctuation">-</span>it<span class="token punctuation">-</span>toc<span class="token punctuation">-</span>and<span class="token punctuation">-</span>anchor</pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token key atrule">options</span><span class="token punctuation">:</span> <span class="token comment"># 文章目录以及锚点应用的 class 名称，shoka 主题必须设置成这样</span></pre></td></tr><tr><td data-num="23"></td><td><pre>          <span class="token key atrule">tocClassName</span><span class="token punctuation">:</span> <span class="token string">'toc'</span></pre></td></tr><tr><td data-num="24"></td><td><pre>          <span class="token key atrule">anchorClassName</span><span class="token punctuation">:</span> <span class="token string">'anchor'</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">-</span> <span class="token key atrule">plugin</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token key atrule">name</span><span class="token punctuation">:</span> markdown<span class="token punctuation">-</span>it<span class="token punctuation">-</span>multimd<span class="token punctuation">-</span>table</pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token key atrule">options</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="29"></td><td><pre>          <span class="token key atrule">multiline</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></pre></td></tr><tr><td data-num="30"></td><td><pre>          <span class="token key atrule">rowspan</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></pre></td></tr><tr><td data-num="31"></td><td><pre>          <span class="token key atrule">headerless</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">-</span> <span class="token key atrule">plugin</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token key atrule">name</span><span class="token punctuation">:</span> ./markdown<span class="token punctuation">-</span>it<span class="token punctuation">-</span>furigana</pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token key atrule">options</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="36"></td><td><pre>          <span class="token key atrule">fallbackParens</span><span class="token punctuation">:</span> <span class="token string">"()"</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token punctuation">-</span> <span class="token key atrule">plugin</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token key atrule">name</span><span class="token punctuation">:</span> ./markdown<span class="token punctuation">-</span>it<span class="token punctuation">-</span>spoiler</pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token key atrule">options</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="41"></td><td><pre>          <span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">"你知道得太多了"</span></pre></td></tr><tr><td data-num="42"></td><td><pre></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token key atrule">minify</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="44"></td><td><pre>  <span class="token key atrule">html</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token key atrule">exclude</span><span class="token punctuation">:</span> <span class="token comment"># 排除 hexo-feed 用到的模板文件</span></pre></td></tr><tr><td data-num="47"></td><td><pre>      <span class="token punctuation">-</span> <span class="token string">'**/json.ejs'</span></pre></td></tr><tr><td data-num="48"></td><td><pre>      <span class="token punctuation">-</span> <span class="token string">'**/atom.ejs'</span></pre></td></tr><tr><td data-num="49"></td><td><pre>      <span class="token punctuation">-</span> <span class="token string">'**/rss.ejs'</span></pre></td></tr><tr><td data-num="50"></td><td><pre>  <span class="token key atrule">css</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></pre></td></tr><tr><td data-num="52"></td><td><pre>    <span class="token key atrule">exclude</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="53"></td><td><pre>      <span class="token punctuation">-</span> <span class="token string">'**/*.min.css'</span></pre></td></tr><tr><td data-num="54"></td><td><pre>  <span class="token key atrule">js</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="55"></td><td><pre>    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    <span class="token key atrule">mangle</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="57"></td><td><pre>      <span class="token key atrule">toplevel</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></pre></td></tr><tr><td data-num="58"></td><td><pre>    <span class="token key atrule">output</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="59"></td><td><pre>    <span class="token key atrule">compress</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="60"></td><td><pre>    <span class="token key atrule">exclude</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="61"></td><td><pre>      <span class="token punctuation">-</span> <span class="token string">'**/*.min.js'</span></pre></td></tr><tr><td data-num="62"></td><td><pre></pre></td></tr><tr><td data-num="63"></td><td><pre><span class="token key atrule">autoprefixer</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="64"></td><td><pre>  <span class="token key atrule">exclude</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="65"></td><td><pre>    <span class="token punctuation">-</span> <span class="token string">'*.min.css'</span></pre></td></tr></table></figure><h2 id="主题配置文件"><a class="anchor" href="#主题配置文件">#</a> 主题配置文件</h2>
<p><code>./_config.shoka.yml</code> ，<span class="exturl" data-url="aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWUvY29tcHV0ZXItc2NpZW5jZS9ub3RlL3RoZW1lLXNob2thLWRvYy9jb25maWcv">详见文档</span></p>
<h3 id="title-subtitle-description-author-altname"><a class="anchor" href="#title-subtitle-description-author-altname">#</a> Title, Subtitle, Description, Author, AltName</h3>
<p><img data-src="/7e446ae38e3a/image-20220510160323254.png" alt title="页面顶部" style="width: 70%"></p>
<p><img data-src="/7e446ae38e3a/image-20220510160346286.png" alt title="侧边栏"></p>
<p><img data-src="/7e446ae38e3a/image-20220510160425835.png" alt title="文章底部"></p>
<p><img data-src="/7e446ae38e3a/image-20220510160405849.png" alt title="页面底部"></p>
<h2 id="front-matter"><a class="anchor" href="#front-matter">#</a> Front-Matter</h2>
<figure class="highlight yaml"><figcaption data-lang="YAML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">---</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token key atrule">title</span><span class="token punctuation">:</span> xxx</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token key atrule">date</span><span class="token punctuation">:</span> YYYY<span class="token punctuation">-</span>MM<span class="token punctuation">-</span>DD hh<span class="token punctuation">:</span>mm<span class="token punctuation">:</span>ss</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token key atrule">cover</span><span class="token punctuation">:</span> url/imageName(in the asset path)</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">---</span></pre></td></tr></table></figure><h2 id="顶部导航栏-nav"><a class="anchor" href="#顶部导航栏-nav">#</a> 顶部导航栏 ——  <code>#nav</code></h2>
<p>布局从左至右分别为：</p>
<ul>
<li><code>.toggle</code>  显示侧导航栏的按钮（屏幕足够小时才出现）</li>
<li><code>.menu</code>  顶部导航栏</li>
<li><code>.right</code>  黑夜模式按钮与搜索按钮</li>
</ul>
<p>样式文件见 <code>./themes/shoka/source/css/_common/outline/header/nav.styl</code> ，相关逻辑见 <code>./themes/shoka/source/js/_app/global.js</code>  中的 <code>scrollHandle</code>  函数，部分解释如下：</p>
<ul>
<li><code>SHOW</code>  当前高度大于 header 高度时切换导航栏样式</li>
<li><code>startScroll</code>  向下滚动时显示工具栏，将 banner 置于底部</li>
<li><code>diffY</code>  滚动后上下方向的偏移值</li>
<li>由于导航栏背景透明，且文字为白色，故为避免被 wave 动画遮挡，当下滚高度大于 banner 时就切换样式；而 sideBar 为避免挡住 wave，需要在高度大于 banner+wave 时才置顶，两者存在细微的差距</li>
</ul>
<h2 id="侧边栏-sidebar"><a class="anchor" href="#侧边栏-sidebar">#</a> 侧边栏 ——  <code>#sideBar</code></h2>
<h3 id="侧边栏跟随顶部导航栏下滑以免被遮挡"><a class="anchor" href="#侧边栏跟随顶部导航栏下滑以免被遮挡">#</a> 侧边栏跟随顶部导航栏下滑以免被遮挡</h3>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// ./themes/shoka/source/js/_app/global.js</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">scrollHandle</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token comment">// ... </span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">var</span> sideBarAffix <span class="token operator">=</span> <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">pageYOffset</span> <span class="token operator">></span> headerHight <span class="token operator">&amp;&amp;</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">body</span><span class="token punctuation">.</span><span class="token property-access">offsetWidth</span> <span class="token operator">></span> <span class="token number">991</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token comment">// ... </span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>diffY <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    sideBar<span class="token punctuation">.</span><span class="token property-access">firstElementChild</span><span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">top</span> <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword control-flow">else</span> <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>diffY <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token constant">SHOW</span> <span class="token operator">&amp;&amp;</span> sideBarAffix<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      sideBar<span class="token punctuation">.</span><span class="token property-access">firstElementChild</span><span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">top</span> <span class="token operator">=</span> siteNavHeight <span class="token operator">+</span> <span class="token string">"px"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token keyword control-flow">else</span> <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token constant">SHOW</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token keyword">var</span> delta <span class="token operator">=</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">pageYOffset</span> <span class="token operator">+</span> siteNavHeight <span class="token operator">+</span> <span class="token number">10</span> <span class="token operator">-</span> headerHight <span class="token operator">-</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">getComputedStyle</span><span class="token punctuation">(</span>sideBar<span class="token punctuation">.</span><span class="token property-access">firstElementChild</span><span class="token punctuation">.</span><span class="token property-access">firstElementChild</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'paddingTop'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      sideBar<span class="token punctuation">.</span><span class="token property-access">firstElementChild</span><span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">top</span> <span class="token operator">=</span> delta <span class="token operator">+</span> <span class="token string">"px"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token keyword control-flow">else</span> sideBar<span class="token punctuation">.</span><span class="token property-access">firstElementChild</span><span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">top</span> <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul>
<li>
<p>如果当前下滑高度大于 banner+wave 时，则 <code>sideBar &gt;.inner &#123;position: fixed&#125;</code> ，与 nav 相同，则只需下降 siteNavHeight 即可</p>
</li>
<li>
<p>如果高度介于两者之间，则 <code>sideBar &gt;.inner &#123;position: relative&#125;</code> ，需要计算 nav 和 sideBar 的绝对高度之差，即为应该下降的高度</p>
<ul>
<li>当 nav 和 sideBar 都为固定位置时， <code>sidebar.tab.style.paddingTop = 10px</code> ，当变成相对位置时其 padding 不作用于 nav，需要手动加上避免贴贴</li>
<li>使用 <code>firstElementChild</code>  而不是类或标签选择器是为了兼容文章页和主页，主页下没有 <code>sideBar.tab</code></li>
<li>当 sideBar 的位置不会被遮挡时，则无需调整位置，对应 <code>Math.max(0, ...)</code>  和 <code>else</code></li>
</ul>
</li>
<li>
<p>添加过渡动画</p>
<figure class="highlight stylus"><figcaption data-lang="stylus"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector"><span class="token comment">/* ./themes/shoka/source/css/_common/outline/sidebar/sidebar.styl */</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>#sidebar <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token selector">>.inner <span class="token punctuation">&#123;</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token func"><span class="token function">the-transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
</ul>
<h3 id="鼠标移出author框时的模糊特效"><a class="anchor" href="#鼠标移出author框时的模糊特效">#</a> 鼠标移出 author 框时的模糊特效</h3>
<figure class="highlight stylus"><figcaption data-lang="stylus"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector"><span class="token comment">/* ./themes/shoka/source/css/_common/outline/sidebar/author.styl */</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>.author:hover .image<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token atrule-declaration"><span class="token atrule">@extend</span> .shake<span class="token punctuation">;</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token selector"><span class="token comment">/* ./themes/shoka/source/css/_common/components/third-party/third-party.styl */</span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>.lozaded <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token atrule-declaration"><span class="token atrule">@extend</span> .blur<span class="token punctuation">;</span></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>头像图片为 <code>lozaded</code>  类，主题作者为其添加了 blur 动画，当 hover 到 author 框时动画被覆盖为 shake，移出鼠标时恢复为 blur，故会播放 blur 动画</p>
<p>动画具体实现细节详见 <code>./themes/shoka/source/css/_common/scaffolding/animate.styl</code></p>
<h2 id="代码块-figurehighlight"><a class="anchor" href="#代码块-figurehighlight">#</a> 代码块 ——  <code>figure.highlight</code></h2>
<p>CSS 样式 ——  <code>./themes/shoka/source/css/_common/components/highlight/</code></p>
<ul>
<li><code>figcaption</code>  代码块上方窗口样式</li>
<li><code>operation</code>  右上角功能按钮，依次为自动换行、复制和代码块全屏</li>
<li><code>code-container</code>  代码块本体</li>
</ul>
<p>相关逻辑 ——  <code>./themes/shoka/source/js/_app/page.js</code></p>
<ul>
<li>
<p>通过绑定点击事件实现逻辑，每个代码块相互独立</p>
</li>
<li>
<p>点击上方窗口或右上角全屏按钮都会执行 <code>fullscreenHandle</code>  函数</p>
</li>
</ul>
<h3 id="调整全屏代码块大小"><a class="anchor" href="#调整全屏代码块大小">#</a> 调整全屏代码块大小</h3>
<ol>
<li>
<p>修改 CSS 样式</p>
<figure class="highlight stylus"><figcaption data-lang="stylus"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token selector"><span class="token comment">/* ./themes/shoka/source/css/_common/components/highlight/ */</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>&amp;.fullscreen <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token property-declaration"><span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token property-declaration"><span class="token property">top</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token unit">%</span><span class="token punctuation">;</span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token property-declaration"><span class="token property">left</span><span class="token punctuation">:</span> <span class="token number">15</span><span class="token unit">%</span><span class="token punctuation">;</span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token property-declaration"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">70</span><span class="token unit">%</span><span class="token punctuation">;</span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token property-declaration"><span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">90</span><span class="token unit">%</span><span class="token punctuation">;</span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token property-declaration"><span class="token property">min-width</span><span class="token punctuation">:</span> <span class="token number">70</span><span class="token unit">%</span><span class="token punctuation">;</span></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
<li>
<p>点击窗口外部时缩小窗口</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// ./themes/shoka/source/js/_app/page.js</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">var</span> <span class="token function-variable function">outsideClickListener</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>element<span class="token punctuation">.</span><span class="token method function property-access">contains</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token function">fullscreenHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li>
<li>
<p>绑定事件，放大时隐藏窗口下方的 <code>showBtn</code>  和顶部导航栏</p>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// ./themes/shoka/source/js/_app/page.js</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">var</span> <span class="token function-variable function">fullscreenHandle</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token comment">// var target = event.currentTarget;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span><span class="token method function property-access">hasClass</span><span class="token punctuation">(</span><span class="token string">'fullscreen'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>showBtn<span class="token punctuation">)</span> showBtn<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">display</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseup'</span><span class="token punctuation">,</span> outsideClickListener<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token comment">// hide showBtn</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>showBtn<span class="token punctuation">)</span> showBtn<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">display</span> <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token comment">// cancel fullscreen when click outside</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseup'</span><span class="token punctuation">,</span> outsideClickListener<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// hide navBar</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    siteNav<span class="token punctuation">.</span><span class="token method function property-access">removeClass</span><span class="token punctuation">(</span><span class="token string">'up'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    siteNav<span class="token punctuation">.</span><span class="token method function property-access">toggleClass</span><span class="token punctuation">(</span><span class="token string">'down'</span><span class="token punctuation">,</span> <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">pageYOffset</span> <span class="token operator">></span> headerHightInner<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
</ol>
<h2 id="鼠标点击特效"><a class="anchor" href="#鼠标点击特效">#</a> 鼠标点击特效</h2>
<figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/* ./themes/shoka/scripts/generaters/script.js */</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword control-flow">if</span><span class="token punctuation">(</span>theme<span class="token punctuation">.</span><span class="token property-access">fireworks</span> <span class="token operator">&amp;&amp;</span> theme<span class="token punctuation">.</span><span class="token property-access">fireworks</span><span class="token punctuation">.</span><span class="token property-access">enable</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    text <span class="token operator">+=</span> fs<span class="token punctuation">.</span><span class="token method function property-access">readFileSync</span><span class="token punctuation">(</span><span class="token string">'themes/shoka/source/js/_app/fireworks.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    siteConfig<span class="token punctuation">.</span><span class="token property-access">fireworks</span> <span class="token operator">=</span> theme<span class="token punctuation">.</span><span class="token property-access">fireworks</span><span class="token punctuation">.</span><span class="token property-access">color</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token string">"rgba(255,182,185,.9)"</span><span class="token punctuation">,</span> <span class="token string">"rgba(250,227,217,.9)"</span><span class="token punctuation">,</span> <span class="token string">"rgba(187,222,214,.9)"</span><span class="token punctuation">,</span> <span class="token string">"rgba(138,198,209,.9)"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>由上可知可以通过修改主题配置文件来对特效进行修改</p>
<h2 id="切换页面时修改网页图标与标题"><a class="anchor" href="#切换页面时修改网页图标与标题">#</a> 切换页面时修改网页图标与标题</h2>
<figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/* ./themes/shoka/source/js/_app/global.js */</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">visibilityListener</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'visibilitychange'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword control-flow">switch</span><span class="token punctuation">(</span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">visibilityState</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token keyword">case</span> <span class="token string">'hidden'</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'[rel="icon"]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">,</span> statics <span class="token operator">+</span> <span class="token constant">CONFIG</span><span class="token punctuation">.</span><span class="token property-access">favicon</span><span class="token punctuation">.</span><span class="token property-access">hidden</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">title</span> <span class="token operator">=</span> <span class="token constant">LOCAL</span><span class="token punctuation">.</span><span class="token property-access">favicon</span><span class="token punctuation">.</span><span class="token property-access">hide</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword control-flow">if</span><span class="token punctuation">(</span><span class="token constant">CONFIG</span><span class="token punctuation">.</span><span class="token property-access">loader</span><span class="token punctuation">.</span><span class="token keyword control-flow">switch</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>          <span class="token maybe-class-name">Loader</span><span class="token punctuation">.</span><span class="token method function property-access">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token function">clearTimeout</span><span class="token punctuation">(</span>titleTime<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token keyword control-flow">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token keyword">case</span> <span class="token string">'visible'</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'[rel="icon"]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">,</span> statics <span class="token operator">+</span> <span class="token constant">CONFIG</span><span class="token punctuation">.</span><span class="token property-access">favicon</span><span class="token punctuation">.</span><span class="token property-access">normal</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 修改 icon</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">title</span> <span class="token operator">=</span> <span class="token constant">LOCAL</span><span class="token punctuation">.</span><span class="token property-access">favicon</span><span class="token punctuation">.</span><span class="token property-access">show</span><span class="token punctuation">;</span> <span class="token comment">// 标题设置成 “恢复标题”</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token keyword control-flow">if</span><span class="token punctuation">(</span><span class="token constant">CONFIG</span><span class="token punctuation">.</span><span class="token property-access">loader</span><span class="token punctuation">.</span><span class="token keyword control-flow">switch</span><span class="token punctuation">)</span> <span class="token comment">// 加载动画</span></pre></td></tr><tr><td data-num="16"></td><td><pre>          <span class="token maybe-class-name">Loader</span><span class="token punctuation">.</span><span class="token method function property-access">hide</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        titleTime <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 2 秒后恢复正常标题</span></pre></td></tr><tr><td data-num="18"></td><td><pre>          <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">title</span> <span class="token operator">=</span> originTitle<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token keyword control-flow">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token comment">/* ./themes/shoka/source/js/_app/pjax.js */</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token function">visibilityListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// line ~122~</span></pre></td></tr></table></figure><h2 id="字数及阅读时间统计"><a class="anchor" href="#字数及阅读时间统计">#</a> 字数及阅读时间统计</h2>
<p>安装 <code>hexo-symbols-count-time</code> ，无需 <code>--save</code> ，然后修改主题配置即可</p>
<figure class="highlight yaml"><figcaption data-lang="YAML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># ./_config.shoka.yml</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token key atrule">footer</span><span class="token punctuation">:</span> <span class="token comment"># 页尾全站统计</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token key atrule">since</span><span class="token punctuation">:</span> <span class="token number">2022</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token key atrule">count</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token key atrule">post</span><span class="token punctuation">:</span> <span class="token comment"># 文章界面统计</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token key atrule">count</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></pre></td></tr></table></figure><h2 id="杂项"><a class="anchor" href="#杂项">#</a> 杂项</h2>
<h3 id="hexotypora图片路径问题"><a class="anchor" href="#hexotypora图片路径问题">#</a> Hexo+Typora 图片路径问题</h3>
<ol>
<li>
<p><code>npm install --save https://github.com/CodeFalling/hexo-asset-image</code>  安装插件 ，忽略 vulnerabilities</p>
<p><img data-src="/7e446ae38e3a/image-20220426175747765.png" alt></p>
</li>
<li>
<p>在 <code>./_config.yml</code>  中设置 <code>post_asset_folder: true</code></p>
</li>
<li>
<p>设置 Typora 图片存储路径，hexo 生成时<strong>无需</strong>删除同名文件夹前缀路径</p>
<p><img data-src="/7e446ae38e3a/image-20220426152301285.png" alt></p>
</li>
<li>
<p>搭配 shoka 使用时会报 <code>no src attr, skipped...</code> ，将 <code>./node_modules/hexo-asset-image/index.js</code>  中尝试获取 <code>src</code>  属性的代码改成获取 <code>data-src</code>  属性<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45149481/article/details/116766362"><sup> [ref]</sup></a></p>
</li>
</ol>
<h3 id="invalid-tag-name-save-in-npm"><a class="anchor" href="#invalid-tag-name-save-in-npm">#</a> Invalid tag name &quot;--save&quot; in npm</h3>
<figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">npm</span> <span class="token function">install</span> GitUrl --save <span class="token comment"># ×</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">npm</span> <span class="token function">install</span> --save GitUrl <span class="token comment"># √</span></pre></td></tr></table></figure><h3 id="prism-warningref"><a class="anchor" href="#prism-warningref">#</a> Prism Warning<a target="_blank" rel="noopener" href="https://github.com/amehime/hexo-theme-shoka/issues/29#issuecomment-907326896"><sup>[ref]</sup></a></h3>
<div class="note warning">
<p>Prism's Diff Highlight plugin requires the Diff language definition (prism-diff.js).Make sure the language definition is loaded or use Prism's Autoloader plugin.</p>
</div>
<p>前往<span class="exturl" data-url="aHR0cHM6Ly9wcmlzbWpzLmNvbS9kb3dubG9hZC5odG1sI3RoZW1lcz1wcmlzbS1jb3kmYW1wO2xhbmd1YWdlcz1tYXJrdXArY3NzK2NsaWtlK2phdmFzY3JpcHQrYWJhcCthYm5mK2FjdGlvbnNjcmlwdCthZGErYWdkYSthbCthbnRscjQrYXBhY2hlY29uZithcGV4K2FwbCthcHBsZXNjcmlwdCthcWwrYXJkdWlubythcmZmK2FzY2lpZG9jK2FzcG5ldCthc202NTAyK2F1dG9ob3RrZXkrYXV0b2l0K2Jhc2grYmFzaWMrYmF0Y2grYmJjb2RlK2JpY2VwK2JpcmIrYmlzb24rYm5mK2JyYWluZnVjayticmlnaHRzY3JpcHQrYnJvK2JzbCtjK2NzaGFycCtjcHArY2ZzY3JpcHQrY2hhaXNjcmlwdCtjaWwrY2xvanVyZStjbWFrZStjb2JvbCtjb2ZmZWVzY3JpcHQrY29uY3VybmFzK2NzcCtjb3ErY3J5c3RhbCtjc3MtZXh0cmFzK2NzditjeXBoZXIrZCtkYXJ0K2RhdGF3ZWF2ZStkYXgrZGhhbGwrZGlmZitkamFuZ28rZG5zLXpvbmUtZmlsZStkb2NrZXIrZG90K2VibmYrZWRpdG9yY29uZmlnK2VpZmZlbCtlanMrZWxpeGlyK2VsbStldGx1YStlcmIrZXJsYW5nK2V4Y2VsLWZvcm11bGErZnNoYXJwK2ZhY3RvcitmYWxzZStmaXJlc3RvcmUtc2VjdXJpdHktcnVsZXMrZmxvdytmb3J0cmFuK2Z0bCtnbWwrZ2NvZGUrZ2RzY3JpcHQrZ2VkY29tK2doZXJraW4rZ2l0K2dsc2wrZ28rZ3JhcGhxbCtncm9vdnkraGFtbCtoYW5kbGViYXJzK2hhc2tlbGwraGF4ZStoY2wraGxzbCtob29uK2h0dHAraHBrcCtoc3RzK2ljaGlnb2phbStpY29uK2ljdS1tZXNzYWdlLWZvcm1hdCtpZHJpcytpZ25vcmUraW5mb3JtNytpbmkraW8raitqYXZhK2phdmFkb2MramF2YWRvY2xpa2UramF2YXN0YWNrdHJhY2UramV4bCtqb2xpZStqcStqc2RvYytqcy1leHRyYXMranNvbitqc29uNStqc29ucCtqc3N0YWNrdHJhY2UranMtdGVtcGxhdGVzK2p1bGlhK2tleW1hbitrb3RsaW4ra3VtaXIrbGF0ZXgrbGF0dGUrbGVzcytsaWx5cG9uZCtsaXF1aWQrbGlzcCtsaXZlc2NyaXB0K2xsdm0rbG9nK2xvbGNvZGUrbHVhK21ha2VmaWxlK21hcmtkb3duK21hcmt1cC10ZW1wbGF0aW5nK21hdGxhYittZWwrbWl6YXIrbW9uZ29kYittb25rZXkrbW9vbnNjcmlwdCtuMXFsK240anMrbmFuZDJ0ZXRyaXMtaGRsK25hbmlzY3JpcHQrbmFzbStuZW9uK25ldm9kK25naW54K25pbStuaXgrbnNpcytvYmplY3RpdmVjK29jYW1sK29wZW5jbCtvcGVucWFzbStveitwYXJpZ3ArcGFyc2VyK3Bhc2NhbCtwYXNjYWxpZ28rcHNsK3BjYXhpcytwZW9wbGVjb2RlK3BlcmwrcGhwK3BocGRvYytwaHAtZXh0cmFzK3Bsc3FsK3Bvd2VycXVlcnkrcG93ZXJzaGVsbCtwcm9jZXNzaW5nK3Byb2xvZytwcm9tcWwrcHJvcGVydGllcytwcm90b2J1ZitwdWcrcHVwcGV0K3B1cmUrcHVyZWJhc2ljK3B1cmVzY3JpcHQrcHl0aG9uK3FzaGFycCtxK3FtbCtxb3JlK3IrcmFja2V0K2pzeCt0c3grcmVhc29uK3JlZ2V4K3JlZ28rcmVucHkrcmVzdCtyaXArcm9ib2NvbmYrcm9ib3RmcmFtZXdvcmsrcnVieStydXN0K3NhcytzYXNzK3Njc3Mrc2NhbGErc2NoZW1lK3NoZWxsLXNlc3Npb24rc21hbGkrc21hbGx0YWxrK3NtYXJ0eStzbWwrc29saWRpdHkrc29sdXRpb24tZmlsZStzb3krc3BhcnFsK3NwbHVuay1zcGwrc3FmK3NxbCtzcXVpcnJlbCtzdGFuK2llY3N0K3N0eWx1cytzd2lmdCt0NC10ZW1wbGF0aW5nK3Q0LWNzK3Q0LXZiK3RhcCt0Y2wrdHQyK3RleHRpbGUrdG9tbCt0dXJ0bGUrdHdpZyt0eXBlc2NyaXB0K3R5cG9zY3JpcHQrdW5yZWFsc2NyaXB0K3VyaSt2K3ZhbGErdmJuZXQrdmVsb2NpdHkrdmVyaWxvZyt2aGRsK3ZpbSt2aXN1YWwtYmFzaWMrd2FycHNjcmlwdCt3YXNtK3dpa2krd29sZnJhbSt4ZW9yYSt4bWwtZG9jK3hvam8reHF1ZXJ5K3lhbWwreWFuZyt6aWc=">这个页面</span>最下方点击 Download JS，替换 <code>./node_modules/prismjs/prism.js</code></p>

  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">更新于</span>
    <time title="修改时间：2022-05-13 17:57:15" itemprop="dateModified" datetime="2022-05-13T17:57:15+08:00">2022-05-13</time>
  </span>

</div>

      

<div id="copyright">
<ul>
  <li class="author">
    <strong>本文作者： </strong>JolyneAnasui <i class="ic i-at"><em>@</em></i>念
  </li>
  <li class="link">
    <strong>本文链接：</strong>
    <a href="http://example.com/7e446ae38e3a/" title="Theme Shoka">http://example.com/7e446ae38e3a/</a>
  </li>
  <li class="license">
    <strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/9c8fba9d15c6/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1giclflwv2aj20zk0m84qp.jpg" title="Hexo的安装与部署">
  <span class="type">上一篇</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>Hexo的安装与部署</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/3375cd0e7229/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipewkhf1zj20zk0m81kx.jpg" title="Accessing non-existent property &#39;xxx&#39; of module exports inside circular dependency">
  <span class="type">下一篇</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>Accessing non-existent property 'xxx' of module exports inside circular dependency</h3>
  </a>

    </div>
</div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="文章目录">
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85shoka"><span class="toc-number">1.</span> <span class="toc-text"> 安装 shoka</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9D%E6%AC%A1%E5%90%AF%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text"> 初次启动配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text"> 主题配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#title-subtitle-description-author-altname"><span class="toc-number">3.1.</span> <span class="toc-text"> Title, Subtitle, Description, Author, AltName</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#front-matter"><span class="toc-number">4.</span> <span class="toc-text"> Front-Matter</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B6%E9%83%A8%E5%AF%BC%E8%88%AA%E6%A0%8F-nav"><span class="toc-number">5.</span> <span class="toc-text"> 顶部导航栏 ——  #nav</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%A7%E8%BE%B9%E6%A0%8F-sidebar"><span class="toc-number">6.</span> <span class="toc-text"> 侧边栏 ——  #sideBar</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%A7%E8%BE%B9%E6%A0%8F%E8%B7%9F%E9%9A%8F%E9%A1%B6%E9%83%A8%E5%AF%BC%E8%88%AA%E6%A0%8F%E4%B8%8B%E6%BB%91%E4%BB%A5%E5%85%8D%E8%A2%AB%E9%81%AE%E6%8C%A1"><span class="toc-number">6.1.</span> <span class="toc-text"> 侧边栏跟随顶部导航栏下滑以免被遮挡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BC%A0%E6%A0%87%E7%A7%BB%E5%87%BAauthor%E6%A1%86%E6%97%B6%E7%9A%84%E6%A8%A1%E7%B3%8A%E7%89%B9%E6%95%88"><span class="toc-number">6.2.</span> <span class="toc-text"> 鼠标移出 author 框时的模糊特效</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%9D%97-figurehighlight"><span class="toc-number">7.</span> <span class="toc-text"> 代码块 ——  figure.highlight</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E6%95%B4%E5%85%A8%E5%B1%8F%E4%BB%A3%E7%A0%81%E5%9D%97%E5%A4%A7%E5%B0%8F"><span class="toc-number">7.1.</span> <span class="toc-text"> 调整全屏代码块大小</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E7%89%B9%E6%95%88"><span class="toc-number">8.</span> <span class="toc-text"> 鼠标点击特效</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%87%E6%8D%A2%E9%A1%B5%E9%9D%A2%E6%97%B6%E4%BF%AE%E6%94%B9%E7%BD%91%E9%A1%B5%E5%9B%BE%E6%A0%87%E4%B8%8E%E6%A0%87%E9%A2%98"><span class="toc-number">9.</span> <span class="toc-text"> 切换页面时修改网页图标与标题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E6%95%B0%E5%8F%8A%E9%98%85%E8%AF%BB%E6%97%B6%E9%97%B4%E7%BB%9F%E8%AE%A1"><span class="toc-number">10.</span> <span class="toc-text"> 字数及阅读时间统计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%82%E9%A1%B9"><span class="toc-number">11.</span> <span class="toc-text"> 杂项</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#hexotypora%E5%9B%BE%E7%89%87%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98"><span class="toc-number">11.1.</span> <span class="toc-text"> Hexo+Typora 图片路径问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#invalid-tag-name-save-in-npm"><span class="toc-number">11.2.</span> <span class="toc-text"> Invalid tag name &quot;--save&quot; in npm</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#prism-warningref"><span class="toc-number">11.3.</span> <span class="toc-text"> Prism Warning[ref]</span></a></li></ol></li></ol>
      </div>
      <div class="related panel pjax" data-title="系列文章">
      </div>
      <div class="overview panel" data-title="站点概览">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="JolyneAnasui"
      data-src="/images/avatar.jpg">
  <p class="name" itemprop="name">JolyneAnasui</p>
  <div class="description" itemprop="description">description</div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">6</span>
        <span class="name">文章</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0pvbHluZUFuYXN1aQ==" title="https:&#x2F;&#x2F;github.com&#x2F;JolyneAnasui"><i class="ic i-github"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>首页</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/9c8fba9d15c6/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/3375cd0e7229/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          



        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 
    <span itemprop="copyrightYear">2022</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">JolyneAnasui @ Alt Name</span>
  </div>
  <div class="count">
    <span class="post-meta-item-icon">
      <i class="ic i-chart-area"></i>
    </span>
    <span title="站点总字数">11k 字</span>

    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="ic i-coffee"></i>
    </span>
    <span title="站点阅读时长">10 分钟</span>
  </div>
  <div class="powered-by">
    基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: '7e446ae38e3a/',
    favicon: {
      show: "（●´3｀●）やれやれだぜ",
      hide: "(´Д｀)大変だ！"
    },
    search : {
      placeholder: "文章搜索",
      empty: "关于 「 ${query} 」，什么也没搜到",
      stats: "${time} ms 内找到 ${hits} 条结果"
    },fancybox: true,
    copyright: '复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="https://jolyneanasui-blog.oss-cn-hangzhou.aliyuncs.com/js/pace%401.0.2.min.js"></script>
<script src="https://jolyneanasui-blog.oss-cn-hangzhou.aliyuncs.com/js/pjax%400.2.8.min.js"></script>
<script src="https://jolyneanasui-blog.oss-cn-hangzhou.aliyuncs.com/js/fetch%403.4.0.umd.min.js"></script>
<script src="https://jolyneanasui-blog.oss-cn-hangzhou.aliyuncs.com/js/anime%403.2.0.min.js"></script>
<script src="https://jolyneanasui-blog.oss-cn-hangzhou.aliyuncs.com/js/algoliasearch-lite%404.13.0.umd.js"></script>
<script src="https://jolyneanasui-blog.oss-cn-hangzhou.aliyuncs.com/js/instantsearch%404.40.5.production.min.js"></script>
<script src="https://jolyneanasui-blog.oss-cn-hangzhou.aliyuncs.com/js/lozad%401.16.0.min.js"></script>
<script src="https://jolyneanasui-blog.oss-cn-hangzhou.aliyuncs.com/js/quicklink%402.2.0.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
